{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\barte\\\\OneDrive\\\\Documents\\\\GitHub\\\\yernemm-xyz\\\\pages\\\\posts\\\\[id].js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Wrapper from '../../components/page-wrapper';\nimport fetch from 'isomorphic-unfetch';\nimport Link from 'next/link';\nimport GoogleDoc from '../../scripts/GoogleDoc';\nimport Head from 'next/head';\n\nvar csvtojson = require(\"csvtojson\");\n\nvar Posts = function Posts(props) {\n  return __jsx(Wrapper, {\n    title: \"Post: \" + props.postData.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: props.body,\n    className: \"belowdiv\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11\n    },\n    __self: this\n  }), __jsx(Head, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 12\n    },\n    __self: this\n  }, __jsx(_JSXStyle, {\n    id: \"3050419254\",\n    __self: this\n  }, \"a:link{color:#ccf;}a:visited{color:#ccf;}a:hover{color:#88f;}a:active{color:#88f;}img{max-width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYmFydGVcXE9uZURyaXZlXFxEb2N1bWVudHNcXEdpdEh1YlxceWVybmVtbS14eXpcXHBhZ2VzXFxwb3N0c1xcW2lkXS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFXK0IsQUFJZ0IsQUFLQSxBQUtBLEFBS0EsQUFJTSxXQWxCbkIsQUFLQSxBQUtBLEFBS0EsSUFJQSIsImZpbGUiOiJDOlxcVXNlcnNcXGJhcnRlXFxPbmVEcml2ZVxcRG9jdW1lbnRzXFxHaXRIdWJcXHllcm5lbW0teHl6XFxwYWdlc1xccG9zdHNcXFtpZF0uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgV3JhcHBlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL3BhZ2Utd3JhcHBlcic7XHJcbmltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLXVuZmV0Y2gnO1xyXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnO1xyXG5pbXBvcnQgR29vZ2xlRG9jIGZyb20gJy4uLy4uL3NjcmlwdHMvR29vZ2xlRG9jJ1xyXG5pbXBvcnQgSGVhZCBmcm9tICduZXh0L2hlYWQnXHJcbmNvbnN0IGNzdnRvanNvbiA9IHJlcXVpcmUoXCJjc3Z0b2pzb25cIik7XHJcbmxldCBQb3N0cyA9IHByb3BzID0+ICggXHJcbiAgICA8V3JhcHBlciB0aXRsZT17XCJQb3N0OiBcIiArIHByb3BzLnBvc3REYXRhLnRpdGxlfSA+XHJcblxyXG4gICAgICAgIFxyXG4gICAgICA8ZGl2IGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MPXtwcm9wcy5ib2R5fSBjbGFzc05hbWU9XCJiZWxvd2RpdlwiIC8+XHJcbiAgICAgIDxIZWFkPjxzdHlsZSBqc3ggZ2xvYmFsPntgXHJcbiAgLyogdW52aXNpdGVkIGxpbmsgKi9cclxuICBhOmxpbmsge1xyXG4gICAgY29sb3I6ICNjY2Y7XHJcbiAgfVxyXG4gIFxyXG4gIC8qIHZpc2l0ZWQgbGluayAqL1xyXG4gIGE6dmlzaXRlZCB7XHJcbiAgICBjb2xvcjogI2NjZjtcclxuICB9XHJcbiAgXHJcbiAgLyogbW91c2Ugb3ZlciBsaW5rICovXHJcbiAgYTpob3ZlciB7XHJcbiAgICBjb2xvcjogIzg4ZjtcclxuICB9XHJcbiAgXHJcbiAgLyogc2VsZWN0ZWQgbGluayAqL1xyXG4gIGE6YWN0aXZlIHtcclxuICAgIGNvbG9yOiAjODhmO1xyXG4gIH1cclxuXHJcbiAgaW1nIHtcclxuICAgICAgbWF4LXdpZHRoOiAxMDAlO1xyXG4gIH1cclxuYH08L3N0eWxlPjwvSGVhZD5cclxuICAgICAgXHJcbiAgICAgIDxociAvPlxyXG4gICAgICAgIDxkaXYgc3R5bGU9e2RhdGVTdHlsZX0+e2dldERhdGVzKHByb3BzLnBvc3REYXRhLmNyZWF0ZWQsIHByb3BzLnBvc3REYXRhLnVwZGF0ZWQpfTwvZGl2PlxyXG4gICAgPC9XcmFwcGVyPlxyXG4pXHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3N0c1xyXG5cclxuY29uc3QgZGF0ZVN0eWxlID0ge1xyXG4gICAgY29sb3I6ICcjOTk5JyxcclxuICAgIGZvbnRTaXplOiAnODAlJ1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREYXRlcyhjcmVhdGVkLCBlZGl0ZWQpe1xyXG4gICAgbGV0IGNvbnRlbnQgPSBbXTtcclxuXHJcbiAgIFxyXG4gICAgICAgIGlmKGNyZWF0ZWQgKiAxID09IGNyZWF0ZWQpXHJcbiAgICAgICAgY3JlYXRlZCA9IGNyZWF0ZWQgKiAxXHJcblxyXG4gICAgICAgIGlmKGVkaXRlZCAqIDEgPT0gZWRpdGVkKVxyXG4gICAgICAgIGVkaXRlZCA9IGVkaXRlZCAqIDFcclxuICAgIFxyXG4gICAgY29udGVudC5wdXNoKDxzcGFuPkNyZWF0ZWQ6IHtmb3JtYXREYXRlKG5ldyBEYXRlKGNyZWF0ZWQpKX08YnIgLz48L3NwYW4+KTtcclxuICAgIGlmKGVkaXRlZCl7XHJcbiAgICAgICAgY29udGVudC5wdXNoKDxzcGFuPkxhc3QgVXBkYXRlZDoge2Zvcm1hdERhdGUobmV3IERhdGUoZWRpdGVkKSl9PGJyIC8+PC9zcGFuPik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICg8cD57Y29udGVudH08L3A+KVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybWF0RGF0ZShkYXRlKXtcclxuICAgIHJldHVybiBcIlwiXHJcbiAgICArIGRhdGUuZ2V0VVRDRnVsbFllYXIoKSArICctJ1xyXG4gICAgKyBwYWQoKDEgKyBkYXRlLmdldFVUQ01vbnRoKCkpLDIpICsgJy0nXHJcbiAgICArIHBhZChkYXRlLmdldFVUQ0RhdGUoKSwyKSArIFwiIFwiXHJcbiAgICArIHBhZCgoZGF0ZS5nZXRVVENIb3VycygpICUgMTIpLCAyKSArIFwiOlwiXHJcbiAgICArIHBhZChkYXRlLmdldFVUQ01pbnV0ZXMoKSwgMikgKyBcIjpcIlxyXG4gICAgKyBwYWQoZGF0ZS5nZXRVVENTZWNvbmRzKCksIDIpICsgXCIgXCJcclxuICAgICsgKE1hdGguZmxvb3IoZGF0ZS5nZXRVVENIb3VycygpIC8gMTIpID09IDAgPyBcIkFNXCIgOiBcIlBNXCIpXHJcbiAgICArIFwiIChVVEMpXCJcclxufVxyXG5cclxuZnVuY3Rpb24gcGFkKG51bSwgc2l6ZSkge1xyXG4gICAgdmFyIHMgPSBudW0rXCJcIjtcclxuICAgIHdoaWxlIChzLmxlbmd0aCA8IHNpemUpIHMgPSBcIjBcIiArIHM7XHJcbiAgICByZXR1cm4gcztcclxufVxyXG5cclxuUG9zdHMuZ2V0SW5pdGlhbFByb3BzID0gYXN5bmMgZnVuY3Rpb24oY29udGV4dCkge1xyXG4gICAgY29uc3QgeyBpZCB9ID0gY29udGV4dC5xdWVyeTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKCdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2U0FmNWExcHdJai15aktQRmhveVFkSFRTM2hIQk5aVllYUVJUQ29BSFhkNnpZTXk1OGlacjBJVzA1NFdnbEJKazlhZmtuc1RJZVZTOGVGL3B1Yj9vdXRwdXQ9Y3N2Jyk7XHJcbiAgICBjb25zdCBjc3YgPSBhd2FpdCByZXMudGV4dCgpO1xyXG4gICAgY29uc3QganNvbiA9IGF3YWl0IGNzdnRvanNvbigpLmZyb21TdHJpbmcoY3N2KS50aGVuKGpzb24gPT4ge1xyXG4gICAgICAgIHJldHVybiBqc29uO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcclxuICAgIC8vZXJyb3IgcG9zdCBieSBkZWZhdWx0XHJcbiAgICBsZXQgdXJsID0gXCJodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kL2UvMlBBQ1gtMXZUVzNLMlRZRm9FVDdJVDVmaTJ3ZlBCbUh2M0tGamlLRnA2Rldzbkw2OXZYY2tNTjZQbHdTTHVEbE82Z1JsNF9qQWZOeVpfaFE5VW9RcUsvcHViP2VtYmVkZGVkPXRydWVcIjtcclxuICAgIGxldCBwb3N0RGF0YSA9IHt0aXRsZTogXCJOb3QgZm91bmQuXCJ9XHJcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwganNvbi5sZW5ndGggJiYgIWZvdW5kOyBpKyspe1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coanNvbltpXSlcclxuICAgICAgICBpZihqc29uW2ldLmlkID09IGlkKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpKVxyXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHVybCA9IGpzb25baV0uZG9jO1xyXG4gICAgICAgICAgICBwb3N0RGF0YSA9IGpzb25baV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuICAgIGxldCBkb2MgPSBuZXcgR29vZ2xlRG9jKHVybCk7XHJcbiAgICBjb25zdCBkb2NkYXRhID0gYXdhaXQgZG9jLmdldERhdGEoKTtcclxuICAgIGxldCBib2R5ID0gZG9jZGF0YS5ib2R5O1xyXG4gICAgaWYoYm9keS5pbmNsdWRlcygnPGgxPk9uZSBhY2NvdW50LiBBbGwgb2YgR29vZ2xlLjwvaDE+PGgyIGNsYXNzPVwiaGlkZGVuLXNtYWxsXCI+U2lnbiBpbiB0byBjb250aW51ZSB0byBEb2NzPC9oMj4nKSl7XHJcbiAgICAgICAgYm9keSA9IFwiPGgxPk9vcHMsIHBvc3QgY29udGVudCBub3QgZm91bmQuLi48L2gxPjxoMj5Mb29rcyBsaWtlIHRoaXMgcG9zdCBpcyBwcml2YXRlIG9yIHJlbW92ZWQuIENoZWNrIGJhY2sgbGF0ZXIhPC9oMj48cD5FcnJvciBjb2RlOiAxPC9wPlwiXHJcbiAgICB9XHJcbiAgICBpZihib2R5LmluY2x1ZGVzKCc8ZGl2ICBjbGFzcz1cIm1haW4gY29udGVudCBjbGVhcmZpeFwiPicpICYmIGJvZHkuaW5jbHVkZXMoJ09uZSBhY2NvdW50LiBBbGwgb2YgR29vZ2xlLicpICYmIGJvZHkuaW5jbHVkZXMoJyBTaWduIGluIHRvIGNvbnRpbnVlIHRvIERvY3MnKSl7XHJcbiAgICAgICAgYm9keSA9IFwiPGgxPk9vcHMsIHBvc3QgY29udGVudCBub3QgZm91bmQuLi48L2gxPjxoMj5Mb29rcyBsaWtlIHRoaXMgcG9zdCBpcyBwcml2YXRlIG9yIHJlbW92ZWQuIENoZWNrIGJhY2sgbGF0ZXIhPC9oMj48cD5FcnJvciBjb2RlOiAyPC9wPlwiXHJcbiAgICB9XHJcbiAgICBjb25zdCBzdHlsZSA9IGRvY2RhdGEuc3R5bGU7XHJcbiAgICAvL2NvbnNvbGUubG9nKGJvZHkpXHJcbiAgICAvL2NvbnN0IGpzb24gPSBhd2FpdCBjc3Z0b2pzb25cclxuICAgIHJldHVybiB7cG9zdHNEYXRhOiBqc29uLCBpZDogaWQsIGJvZHk6IHtfX2h0bWw6IGJvZHl9LCBzdHlsZTogc3R5bGUsIHBvc3REYXRhfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBjb252ZXJ0KGNzdil7XHJcbiAgICBcclxufSJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\barte\\\\\\\\OneDrive\\\\\\\\Documents\\\\\\\\GitHub\\\\\\\\yernemm-xyz\\\\\\\\pages\\\\\\\\posts\\\\\\\\[id].js */\")), __jsx(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    style: dateStyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, getDates(props.postData.created, props.postData.updated)));\n};\n\nexport default Posts;\nvar dateStyle = {\n  color: '#999',\n  fontSize: '80%'\n};\n\nfunction getDates(created, edited) {\n  var content = [];\n  if (created * 1 == created) created = created * 1;\n  if (edited * 1 == edited) edited = edited * 1;\n  content.push(__jsx(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \"Created: \", formatDate(new Date(created)), __jsx(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  })));\n\n  if (edited) {\n    content.push(__jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Last Updated: \", formatDate(new Date(edited)), __jsx(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })));\n  }\n\n  return __jsx(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, content);\n}\n\nfunction formatDate(date) {\n  return \"\" + date.getUTCFullYear() + '-' + pad(1 + date.getUTCMonth(), 2) + '-' + pad(date.getUTCDate(), 2) + \" \" + pad(date.getUTCHours() % 12, 2) + \":\" + pad(date.getUTCMinutes(), 2) + \":\" + pad(date.getUTCSeconds(), 2) + \" \" + (Math.floor(date.getUTCHours() / 12) == 0 ? \"AM\" : \"PM\") + \" (UTC)\";\n}\n\nfunction pad(num, size) {\n  var s = num + \"\";\n\n  while (s.length < size) {\n    s = \"0\" + s;\n  }\n\n  return s;\n}\n\nPosts.getInitialProps = function _callee(context) {\n  var id, res, csv, json, found, url, postData, i, doc, docdata, body, style;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          id = context.query.id;\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vSAf5a1pwIj-yjKPFhoyQdHTS3hHBNZVYXQRTCoAHXd6zYMy58iZr0IW054WglBJk9afknsTIeVS8eF/pub?output=csv'));\n\n        case 3:\n          res = _context.sent;\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(res.text());\n\n        case 6:\n          csv = _context.sent;\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(csvtojson().fromString(csv).then(function (json) {\n            return json;\n          }));\n\n        case 9:\n          json = _context.sent;\n          found = false; //error post by default\n\n          url = \"https://docs.google.com/document/d/e/2PACX-1vTW3K2TYFoET7IT5fi2wfPBmHv3KFjiKFp6FWsnL69vXckMN6PlwSLuDlO6gRl4_jAfNyZ_hQ9UoQqK/pub?embedded=true\";\n          postData = {\n            title: \"Not found.\"\n          };\n\n          for (i = 0; i < json.length && !found; i++) {\n            //console.log(json[i])\n            if (json[i].id == id) {\n              //console.log(i)\n              found = true;\n              url = json[i].doc;\n              postData = json[i];\n            }\n          }\n\n          doc = new GoogleDoc(url);\n          _context.next = 17;\n          return _regeneratorRuntime.awrap(doc.getData());\n\n        case 17:\n          docdata = _context.sent;\n          body = docdata.body;\n\n          if (body.includes('<h1>One account. All of Google.</h1><h2 class=\"hidden-small\">Sign in to continue to Docs</h2>')) {\n            body = \"<h1>Oops, post content not found...</h1><h2>Looks like this post is private or removed. Check back later!</h2><p>Error code: 1</p>\";\n          }\n\n          if (body.includes('<div  class=\"main content clearfix\">') && body.includes('One account. All of Google.') && body.includes(' Sign in to continue to Docs')) {\n            body = \"<h1>Oops, post content not found...</h1><h2>Looks like this post is private or removed. Check back later!</h2><p>Error code: 2</p>\";\n          }\n\n          style = docdata.style; //console.log(body)\n          //const json = await csvtojson\n\n          return _context.abrupt(\"return\", {\n            postsData: json,\n            id: id,\n            body: {\n              __html: body\n            },\n            style: style,\n            postData: postData\n          });\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nfunction convert(csv) {\n  return _regeneratorRuntime.async(function convert$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  });\n}","map":{"version":3,"sources":["C:/Users/barte/OneDrive/Documents/GitHub/yernemm-xyz/pages/posts/[id].js"],"names":["Wrapper","fetch","Link","GoogleDoc","Head","csvtojson","require","Posts","props","postData","title","body","dateStyle","getDates","created","updated","color","fontSize","edited","content","push","formatDate","Date","date","getUTCFullYear","pad","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","Math","floor","num","size","s","length","getInitialProps","context","id","query","res","text","csv","fromString","then","json","found","url","i","doc","getData","docdata","includes","style","postsData","__html","convert"],"mappings":"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","sourcesContent":["import Wrapper from '../../components/page-wrapper';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport Link from 'next/link';\r\nimport GoogleDoc from '../../scripts/GoogleDoc'\r\nimport Head from 'next/head'\r\nconst csvtojson = require(\"csvtojson\");\r\nlet Posts = props => ( \r\n    <Wrapper title={\"Post: \" + props.postData.title} >\r\n\r\n        \r\n      <div dangerouslySetInnerHTML={props.body} className=\"belowdiv\" />\r\n      <Head><style jsx global>{`\r\n  /* unvisited link */\r\n  a:link {\r\n    color: #ccf;\r\n  }\r\n  \r\n  /* visited link */\r\n  a:visited {\r\n    color: #ccf;\r\n  }\r\n  \r\n  /* mouse over link */\r\n  a:hover {\r\n    color: #88f;\r\n  }\r\n  \r\n  /* selected link */\r\n  a:active {\r\n    color: #88f;\r\n  }\r\n\r\n  img {\r\n      max-width: 100%;\r\n  }\r\n`}</style></Head>\r\n      \r\n      <hr />\r\n        <div style={dateStyle}>{getDates(props.postData.created, props.postData.updated)}</div>\r\n    </Wrapper>\r\n)\r\n\r\nexport default Posts\r\n\r\nconst dateStyle = {\r\n    color: '#999',\r\n    fontSize: '80%'\r\n}\r\n\r\nfunction getDates(created, edited){\r\n    let content = [];\r\n\r\n   \r\n        if(created * 1 == created)\r\n        created = created * 1\r\n\r\n        if(edited * 1 == edited)\r\n        edited = edited * 1\r\n    \r\n    content.push(<span>Created: {formatDate(new Date(created))}<br /></span>);\r\n    if(edited){\r\n        content.push(<span>Last Updated: {formatDate(new Date(edited))}<br /></span>);\r\n    }\r\n\r\n    return (<p>{content}</p>)\r\n\r\n}\r\n\r\nfunction formatDate(date){\r\n    return \"\"\r\n    + date.getUTCFullYear() + '-'\r\n    + pad((1 + date.getUTCMonth()),2) + '-'\r\n    + pad(date.getUTCDate(),2) + \" \"\r\n    + pad((date.getUTCHours() % 12), 2) + \":\"\r\n    + pad(date.getUTCMinutes(), 2) + \":\"\r\n    + pad(date.getUTCSeconds(), 2) + \" \"\r\n    + (Math.floor(date.getUTCHours() / 12) == 0 ? \"AM\" : \"PM\")\r\n    + \" (UTC)\"\r\n}\r\n\r\nfunction pad(num, size) {\r\n    var s = num+\"\";\r\n    while (s.length < size) s = \"0\" + s;\r\n    return s;\r\n}\r\n\r\nPosts.getInitialProps = async function(context) {\r\n    const { id } = context.query;\r\n    const res = await fetch('https://docs.google.com/spreadsheets/d/e/2PACX-1vSAf5a1pwIj-yjKPFhoyQdHTS3hHBNZVYXQRTCoAHXd6zYMy58iZr0IW054WglBJk9afknsTIeVS8eF/pub?output=csv');\r\n    const csv = await res.text();\r\n    const json = await csvtojson().fromString(csv).then(json => {\r\n        return json;\r\n    });\r\n    let found = false;\r\n    //error post by default\r\n    let url = \"https://docs.google.com/document/d/e/2PACX-1vTW3K2TYFoET7IT5fi2wfPBmHv3KFjiKFp6FWsnL69vXckMN6PlwSLuDlO6gRl4_jAfNyZ_hQ9UoQqK/pub?embedded=true\";\r\n    let postData = {title: \"Not found.\"}\r\n    for(let i = 0; i < json.length && !found; i++){\r\n        //console.log(json[i])\r\n        if(json[i].id == id)\r\n        {\r\n            //console.log(i)\r\n            found = true;\r\n            url = json[i].doc;\r\n            postData = json[i];\r\n        }\r\n\r\n    }\r\n    let doc = new GoogleDoc(url);\r\n    const docdata = await doc.getData();\r\n    let body = docdata.body;\r\n    if(body.includes('<h1>One account. All of Google.</h1><h2 class=\"hidden-small\">Sign in to continue to Docs</h2>')){\r\n        body = \"<h1>Oops, post content not found...</h1><h2>Looks like this post is private or removed. Check back later!</h2><p>Error code: 1</p>\"\r\n    }\r\n    if(body.includes('<div  class=\"main content clearfix\">') && body.includes('One account. All of Google.') && body.includes(' Sign in to continue to Docs')){\r\n        body = \"<h1>Oops, post content not found...</h1><h2>Looks like this post is private or removed. Check back later!</h2><p>Error code: 2</p>\"\r\n    }\r\n    const style = docdata.style;\r\n    //console.log(body)\r\n    //const json = await csvtojson\r\n    return {postsData: json, id: id, body: {__html: body}, style: style, postData}\r\n}\r\n\r\nasync function convert(csv){\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}